(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t){},136:function(e,t){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),i=a.n(c),r=a(22),l=a(194),o=a(189),s=a(184),d=a(187),j=a(155),m=a(18),u=a(87),b=a(58),x=a.n(b),p=a(4),O=Object(n.createContext)(),g=Object(u.io)("https://192.168.0.101:5000"),f=function(e){var t=e.children,a=Object(n.useState)(),c=Object(m.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(""),o=Object(m.a)(l,2),s=o[0],d=o[1],j=Object(n.useState)({}),u=Object(m.a)(j,2),b=u[0],f=u[1],h=Object(n.useState)(!1),v=Object(m.a)(h,2),w=v[0],C=v[1],y=Object(n.useState)(!1),N=Object(m.a)(y,2),k=N[0],S=N[1],I=Object(n.useState)(""),D=Object(m.a)(I,2),P=D[0],U=D[1],A=Object(n.useRef)(),B=Object(n.useRef)(),W=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),A.current.srcObject=e})),g.on("msg",(function(e){d(e),g.emit("log","Connect user: id ".concat(e))})),g.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;g.emit("log","Call user me: id ".concat(s," | from: id ").concat(t)),f({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(p.jsx)(O.Provider,{value:{call:b,callAccepted:w,myVideo:A,userVideo:B,stream:i,name:P,setName:U,callEnded:k,me:s,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:i});g.emit("log","callUser me: id ".concat(s," calling to ").concat(e)),t.on("signal",(function(t){g.emit("log","callUser (Peer.signal) me: id ".concat(s," calling to ").concat(e)),g.emit("calluser",{userToCall:e,signalData:t,from:s,name:P})})),t.on("stream",(function(t){g.emit("log","callUser (Peer.stream) me: id ".concat(s," calling to ").concat(e)),B.current.srcObject=t})),g.on("callaccepted",(function(a){g.emit("log","callUser (callAccepted) me: id ".concat(s," calling to ").concat(e)),C(!0),t.signal(a)})),W.current=t},leaveCall:function(){S(!0),W.current.destroy(),window.location.reload()},answerCall:function(){C(!0);var e=new x.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){g.emit("log","answerCall (Peer Signal) me: id ".concat(s," | from: id ").concat(b.from)),g.emit("answercall",{signal:e,to:b.from})})),e.on("stream",(function(e){g.emit("log","answerCall (Peer Stream) me: id ".concat(s," | from: id ").concat(b.from)),B.current.srcObject=e})),g.emit("log","answerCall Peer.signal(call.from)"),e.signal(b.signal),W.current=e}},children:t})},h=Object(s.a)((function(e){return{video:Object(r.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}}));var v=function(){var e=Object(n.useContext)(O),t=e.name,a=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,l=e.stream,s=e.call,m=h();return Object(p.jsxs)(d.a,{container:!0,className:m.gridContainer,children:[l&&Object(p.jsx)(j.a,{className:m.paper,children:Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(p.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:m.video,style:{width:"30%",height:"35%"}})]})}),a&&!r&&Object(p.jsx)(j.a,{className:m.paper,children:Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:s.name||"Name"}),Object(p.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:m.video,style:{width:"30%",height:"35%"}})]})})]})},w=a(196),C=function(){var e=Object(n.useContext)(O),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(p.jsx)(p.Fragment,{children:a.isReceivingCall&&!c&&Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(p.jsxs)("h1",{children:[a.name," is calling:"]}),Object(p.jsx)(w.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},y=a(190),N=a(195),k=a(93),S=a(191),I=a(192),D=a(193),P=Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),U=function(e){var t=e.children,a=Object(n.useContext)(O),c=a.me,i=a.callAccepted,r=a.name,l=a.setName,s=a.callEnded,u=a.leaveCall,b=a.callUser,x=Object(n.useState)(""),g=Object(m.a)(x,2),f=g[0],h=g[1],v=P();return Object(p.jsx)(y.a,{className:v.container,children:Object(p.jsxs)(j.a,{elevation:10,className:v.paper,children:[Object(p.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(p.jsxs)(d.a,{container:!0,className:v.gridContainer,children:[Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(p.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(p.jsx)(N.a,{label:"Name",value:r,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(p.jsx)(k.CopyToClipboard,{text:c,className:v.margin,children:Object(p.jsx)(w.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(p.jsx)(S.a,{fontSize:"large"}),children:c})})]}),Object(p.jsxs)(d.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(p.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(p.jsx)(N.a,{label:"ID to call",value:f,onChange:function(e){return h(e.target.value)},fullWidth:!0}),i&&!s?Object(p.jsx)(w.a,{variant:"contained",color:"secondary",startIcon:Object(p.jsx)(I.a,{fontSize:"large"}),fullWidth:!0,onClick:u,className:v.margin,children:"Hang Up"}):Object(p.jsx)(w.a,{variant:"contained",color:"primary",startIcon:Object(p.jsx)(D.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return b(f)},className:v.margin,children:"Call"})]})]})}),t]})})},A=Object(s.a)((function(e){return{appBar:Object(r.a)({margin:"20px 20px",padding:"10px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"300px",border:"3px solid #252525",background:"#000"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}}));var B=function(){var e=A();return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(p.jsx)(o.a,{style:{fontSize:"16pt",fontWeight:"900",color:"white"},variant:"h4",align:"center",children:"box|Meet"})})}),Object(p.jsxs)("div",{className:e.wrapper,children:[Object(p.jsx)(v,{}),Object(p.jsx)(U,{children:Object(p.jsx)(C,{})})]})]})};a(153);i.a.render(Object(p.jsx)(f,{children:Object(p.jsx)(B,{})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.10dd2eff.chunk.js.map